# Process this file with autoconf to produce a configure script.
# require autoconf 2.59
AC_PREREQ(2.59)

AC_INIT(src/aceconn.c)
AM_INIT_AUTOMAKE(libAceConn,0.0.1)
AM_CONFIG_HEADER(config.h)



dnl Disable shared libs so AceConn will be bound in.
AC_DISABLE_SHARED
AM_PROG_LIBTOOL


AC_PROG_INSTALL

AC_LANG_C
AC_PROG_CC
AC_PROG_MAKE_SET

AC_HEADER_STDC

dnl AceConn needs glib
AM_PATH_GLIB_2_0(2.6.4)
AC_SUBST(GLIB_CFLAGS)
AC_SUBST(GLIB_LIBS)

dnl acedb server assumes 4 byte ints so client code must as well.
AC_STRICT_COMPILE_CHECK_SIZEOF(int, 4)

AC_CHECK_HEADERS(unistd.h errno.h signal.h fcntl.h sys/time.h sys/socket.h netinet/in.h netdb.h,,AC_MSG_ERROR([required system header missing]))

AC_CHECK_FUNCS(socket connect shutdown,,AC_MSG_ERROR([required system library function missing]))

AC_CHECK_LIB(readline, readline,,AC_MSG_ERROR(AceConn test program simpleclient requires gnu readline library.))

AC_CONFIG_FILES([AceConn-1.1.pc Makefile include/Makefile src/Makefile test/Makefile doc/Makefile])

AC_OUTPUT
