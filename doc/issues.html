<HTML>

<HEAD>
<TITLE>ZMap Issues</TITLE>
</HEAD>

<BODY>
<H2>ZMap Issues</H2>

<p>This is a record of stuff that we want not to forget in case we want
to look at again and make sure it's been properly resolved.
<hr>
<ol>
<li>In zmapbccol.c at line 286 was a call to bumpItem(), but sometimes
   the bc->bump it passes as first parameter is null.  bumpItem is a
   macro that executes (w1/bump.c) bumpAdd and it is here that the code
   segfaults when bc->bump is null.
<font color = "red">   <pre>
#define bumpItem(_b,_w,_h,_px,_py) bumpAdd(_b,_w,_h,_px,_py,TRUE)
</pre>
<font color = "green"><pre>
BOOL bumpAdd (BUMP bump, int wid, float height, 
	      int *px, float *py, BOOL doIt)
     /* works by resetting x, y */
{
  int i, j ;
  int x = *px ;
  float ynew, y = *py ;

  if (bump->magic != &BUMP_MAGIC)
    messcrash ("bumpAdd received corrupt bump->magic");
   </pre>
   <font color = "black">
   <p>
   For now, I've put in if(bc->bump) but that might not be right.
   <font color = "green"><pre>
	    if (bc->bump)
	      bumpItem(bc->bump, 1, seg->x2 - seg->x1, &xoff, &y);
   </pre><font color = "black">
</li>   
<li>There is no No 2.
</li>
</ol>
<hr>
</body>
</html>
