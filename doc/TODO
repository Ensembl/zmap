#
# This TODO list file is parsed by the script makeQuad which expects this file
# to be in the format:
# 
# 
# [Categories]
# Title = ZMap Priorities
# Across = Important \
# Not_Important
# Down = Urgent \
# Not_Urgent
# 
# 
# [Some item of your choice]
# Across = Important
# Down = Not_Urgent
# Text = Text describing the item, possibly \
# running to several lines.
# 
# There should be only one "Categories" section and you should not alter it without
# altering all the Across/Down entries in all subsequent sections.
#
# Each general section should have a unique header and follow there rules:
#
# Across = < Important | Not_Important >
# Down = < Urgent | Not_Urgent >
# Text = as many lines as you like but you must use the continuation character "\""
#
# NOTE that the section title is the only thing that will be displayed in the
# frames window so make the title meaningful !!!!
#
# Please add new stuff as required _and_ remove obsolete or completed items !
#
#


# DO NOT CHANGE THIS STANZA WILLY-NILLY.....the Across/Down categories are
# used in the rest of the file....
[Categories]
Title = ZMap Priorities
Across = Important \
Not_Important
Down = Urgent \
Not_Urgent


[Shape Diversity]
Across = Not_Important
Down = Not_Urgent
Text = We could do with supporting more shapes styles of "boxes" \
e.g. pointing boxes to show strandedness, start/end not found, text \
on features.... many more I'm sure

[Install package via Autoconf/configure system]
Across = Important
Down = Not_Urgent
Text = We need a pucker install package for zmap \
we need to sort -rpath stuff on alpha....

[Change reverse strand code to always create foocanvas items]
Across = Important
Down = Urgent
Text = We should always create items whether they are shown or not, \
but then just hide them. This would require the hash table to "know" whether \
things were hidden or not for purposes of filtering returned items. \
BUT, this may not be a good idea BECAUSE it would mean mapping potentially thousands \
of homols on the reverse strand....

[column ordering]
Across = Important
Down = Urgent
Text = Better system than current right_priority system for the ordering of    \
columns. (Maybe user defined zones like "transcripts",                         \
"similarity_features", and named columns are put into a zone or                \
left/right of other named columns, or simply in order of appearance if         \
the named column doesn't exist or isn't specified. Can have "default"          \
zone which is right of all the other zones to contain any columns which        \
don't have a zone defined.)  WE DON'T HAVE THIS, SO TALK TO JAMES...          

[column control]
Across = Important
Down = Not_Urgent
Text = All columns, including the default ones, can easily be hidden and \
revealed by the user.                                                                     

[drag and drop column positions]
Across = Important
Down = Urgent
Text = Ability for user to change the order of columns by dragging to new      \
position. This preference is sticky between sessions.                         

[multiple methods per column]
Across = Important
Down = Urgent
Text = If multiple different methods are drawn in the same column, it can be   \
chosen whether they are drawn on top of each other, or stack. Could            \
have different types of transcript appearing in the same column (saves         \
screen space), and draw symbols signifying polyA signals and sites on          \
top of the transcripts.  DON'T HAVE THIS BUT COULD DO....                     

[cds colours]
Across = Important
Down = Urgent
Text = Can choose custom colours for fill and outline for boxes, and different \
ones for CDS regions of transcripts. Colours can be chosen using the           \
standard X colour definitions. WE DON'T USE THIS INFORMATION AND I THINK       \
CURRENTLY ITS NOT DUMPED AS GFF SO WOULD NEED TO ADD TO ACEDB....              

[colour by score]
Across = Important
Down = Not_Urgent
Text = Can change the shade of a colour of a feature according to its score.  \
Maybe a gradient from one colour to another? Maybe a 256bit look up           \
table? COULD BE PART OF THE STYLE...ALSO USE WIDTH OF BLOCK...(LOG SCALE)

[better symbols]
Across = Important
Down = Urgent
Text = Can choose a variety of symbols (circles, triangles, stars) for     \
features in a columns. NOT DONE...                                         \
Feature boxes can have arrow heads/tails at either or both ends.         

[better symbols 2]
Across = Important
Down = Not_Urgent
Text = Can change the symbol used to draw a feature depending upon the zoom \
level. (Not necessary? Could just have features drawn in the same           \
column that are visible at different zoom levels.) ALLELE LIKE THING

[HOMOLS SHOULD USE GAPS ARRAY]
Across = Important
Down = Urgent
Text = HOMOLS SHOULD USE GAPS ARRAY

[text column]
Across = Important
Down = Not_Urgent
Text = Can have labels attached to features, and labels that appear on  \
mouse-over. Labels repel each other so that they don't get drawn on top \
of each other. ACEDB TEXT COLUMN....WE NEED THIS SOON....              

[alternate column types]
Across = Important
Down = Not_Urgent
Text = A graph column type, for displaying properties such as GC content. GC   \
content could be calculated on-the-fly by zMap. Graphs could be         \
histogram, line, or varying shade of a colour (maybe a gradient?).      \

[scale]
Across = Important
Down = Not_Urgent
Text = Have the basepair distance scale permanently on the edge of the window  \
like a ruler in a drawing application.                                         \

[focus window red border + user specified border]
Across = Important
Down = Not_Urgent
Text = Currently canvas windows are surrounded by a frame, while this can be \
coloured red it cannot be made wider and so is almost invisible. Users also \
want to be able to colour borders separately to show which window is which.

[feature search window]
Across = Important
Down = Urgent
Text = implement the feature search window

[external feature list]
Across = Important
Down = Not_Urgent
Text = we should alllow external programs to \
supplying a list of objects from an external source rather like the current feature list \
- would enable user/lace/whatever to select their own sets of features

[empty columns]
Across = Important
Down = Not_Urgent
Text = Currently we can show columns even if empty, this may be good for multiple alignments \
because otherwise the alignment blocks are likely to be all sorts of different widths. \
The problem is that this makes the code more complicated which is not great. \
Perhaps we should think about this again.


[stacking of features in a single column]
Across = Important
Down = Urgent
Text = james would like to multiple feature types per column, we need to implement this \
in a good way, e.g. allow user to specify ordering perhaps ?


[long term plans]
Across = Important
Down = Not_Urgent
Text = need another person, must plan for conferences.


[document rationalisation]
Across = Not_Important
Down = Not_Urgent
Text = The docs directories need sorting out. We should have a script which ensures \
that the doxygen generated docs end up in the "docs" directory below src. The \
makeQuad files should also end up there so we just have the one docs directory. \


[install/user guide]
Across = Important
Down = Not_Urgent
Text = We need to start these.


[zmap vs. fmap]
Across = Important
Down = Urgent
Text = We don't have: \
 \
- clear indication of which forward/reverse strand - users want a line to separate... \
 \
- need scale outside of sequence view - separate window using a canvas which would be resized \
  to line up with selected display.... \
 \
- recalculate button (fmap can do redraw and recalculate....can we do that....??) \
 \
- no view of clones making up assembly \
 \
- no text display with names of stuff \
 \
- no "columns" button \
 \
- no "redraw" button \
 \
- no "dna" button \
 \
- no "revcomp" button \
 \
- no individual column button for configuring buttons \
 \
- On/Off Rev strand                                                                      \
 \
- Column hiding on magnification                                                         \
 \
- embl entry display (pfetch -F <seqName>)                                               \
 \
  - Superior feature view                                                                  \
  - Superior feature list 


[demos]
Across = Important
Down = Not_Urgent
Text = need to add readpairs demo to our demo set + beef up how demos are run... \
we also need a das demo.


[bugs]
Across = Important
Down = Urgent
Text = Here are some bugs we must fix.... \
 \
  - memory leaking  features....need also to have this linked to fTOi mechanism for when things \
   are deleted...                                                                       \
  - scale                                                                                  \
  - multiple sources                                                                       \
  - feature list/view (I also think that there should be a way of clicking on  \
a feature in the feature  in the feature          \
list window and have the feature viewer popup.  

[export features]
Across = Important
Down = Not_Urgent
Text = we should export at least xml and gff3 (but perhaps do gff2 as a stop gap ?


[print]
Across = Important
Down = Not_Urgent
Text = we need a way to print displays....check gd library and other methods.


[scale display]
Across = Important
Down = Not_Urgent
Text = The scale needs moving into a separate slidable window like the other locators \
so that it is always visible. It will have to be linked to scrolling in the \
focus canvas. It will potentially need redrawing/relinking every time focus \
canvas changes.


[DNA display]
Across = Important
Down = Urgent
Text = Need to add display of DNA, should include highlighting of exons etc. when \
clicked on.


[Focus change]
Across = Important
Down = Not_Urgent
Text = The navigator needs to change as the focus changes and the buttons needs \
to change their sensitivity, this is only partially done.


[interaction with features]
Across = Important
Down = Not_Urgent
Text = when you click on a feature in the window that shows the list of features, \
the position scroll bar is not updated properly...needs the visibility \
change callback to be called.


[Region/Scroll scrollbars]
Across = Important
Down = Not_Urgent
Text = The Region/Scroll scrollbars should be sorted to be the correct width by magic. \
Can we add a double click to hide/show to the vertical line of dots??


[glib logging glitches]
Across = Important
Down = Not_Urgent
Text = if you let glib log routines output the message you get something like: \
\
process:554514): ZMap-WARNING **: (zmapAppwindow.c, line 103) - try this for size...\
\
\
the bit upto and including the "**" is supplied by glib, BUT it does not do this if you use your \
own logging routine which is a bit irritating.... \
\
There also seems to be bug in that glib seems to be messing about with fileptrs and hanging \
on to them so that printf statements either don't appear at all or appear in the logfile\
sometimes.....

[multiple alignment support]
Across = Important
Down = Urgent
Text = In order to support multiple alignments there will have to be changes to all of \
zmapControl, zmapView and zmapWindow, it influences all of them. The changes need \
not be too great if we can substitute a set of alignments for the single alignment \
that View currently represents....But it will make view more complicated probably. \
 \
Currently there is fudged code in zmapWindowDrawFeatures() in zmapWindowDrawFeatures.c \
to allow us to start inserting more than one set of alignment data into a window.


[Getting style information from servers]
Across = Important
Down = Not_Urgent
Text = Currently the user has to have a styles file, this is because otherwise we have to query \
the server and get all the types, this code is not impossible but is not written yet. \
It needs doing, BUT, the user should still be able to override this with a list of \
features that they want to see, gives the user control.


[PANGO and FONTS]
Across = Important
Down = Not_Urgent
Text = Check requirement of -DPANGO_ENABLE_{BACKEND,ENGINE} also fontconfig, see if we can fix/remove \
"Fontconfig error: Cannot load default config file" \
FONTCONFIG_PATH \
FONTCONFIG_FILE 


[GFF stuff]
Across = Important
Down = Not_Urgent
Text = Add ability of caller to specify a start/end so this code will filter out anything not in the \
start/end coords. May not be so easy though....what about clipped features...ugh...actually \
its not so simple....bother.....we really want to filter as we process but we won't be able \
to filter some features until we've seen all of them...sigh....yes, its actually quite tricky \
and tedious... \
 \
Need to scope how long it will take to do GFF3.....as this is what we really want....

[Long item bug]
Across = Important
Down = Urgent
Text = There is still a bug in the long item code so that it doesn't clip properly

[transcript display]
Across = Important
Down = Urgent
Text = There is bug: transcripts are narrower than their column...why ? Also, we \
don't display cds and start/stop


[file server interface code]
Across = Important
Down = Not_Urgent
Text = the code in this directory is crude currently, here are some things that need doing: \
 \
- should be able to read files other than GFF.......this will require some restructuring \
  to provide a general file reading interface with specific parsers (preferably the same \
  ones as are used for GFF, XML etc. etc. \
 \
- error handling is probably less than complete. \
 \
- there is no way to ask for just some features currently but this also applies to the server \
interfaces as well....


[cancel points in THREADs code]
Across = Not_Important
Down = Not_Urgent
Text =  need to introduce pthreads_cancel_points into the code so that a cancel \
will interrupt at good places....some thought needed here though to ensure \
that we don't just litter the code with cancel points making it hard to \
maintain...\
\
I think to some extent the main network reading calls get interrupted by \
a cancel so that makes it all work better.


[file utilities in Zmap utils]
Across = Not_Important
Down = Not_Urgent
Text = The fileUtils all need sorting out, they should be rationalised into calls that get \
files from the .ZMap directory and more general calls that construct path names etc.



[zmapfeatures merge]
Across = Important
Down = Urgent
Text = The merge needs work, currently it leads memory and is probably not as efficient as it \
it should be. We should not copy across data but instead move pointers. \
\
Main thing is to protect whole GDatas that we move into our new sets and null out ones we \
don't want. But also, what happens to datastructs of features that we have allocated but \
no longer need...they should be freed.... \

[ACedb tools: xremote and blixem]
Across = Important
Down = Urgent
Block = SwapPhase II
Text = The same should be done for a small library to launch blixem \
given a sequence name/sequences.\
\
We will need a parameter/keyword in the config file to point zmap at the file to run\
blixem, note this might be a cover script that itself runs blixem.

[zmap configuration file]
Across = Important
Down = Urgent
Block = SwapPhase I
Text = The syntax of the properties in the configuration file needs to be constrained/decided \
and coded for, probably to include a uri for data sources.  Will we still need format.  \
The problem I see is file://... With http:// the header would tell us what it is.  However \
with file the extension is probably the best guess we can make.  Does libcurl give us a response \
callback we could check with?

[zmap vs fmap display]
Across = Important
Down = Urgent
Block = SwapPhase I
Text = compare and contrast FMap display and ZMap display. Does ZMap look sane? \
Has it drawn all the information?... Are we missing critical fmap features?

[Bumping]
Across = Important
Down = Urgent
Text = Support multiple types of bumping, still some bugs and need different sorts \
including on key, and one for genomic_canonical to give assembly like display \
showing clone overlaps

[Updating]
Across = Important
Down = Urgent
Text = We need to be able to dynamically update the zmap display and features \
thereon.  Need an interface to create, modify and delete objects.  This needs \
to be available to xremote.

[zmap_remote]
Across = Important
Down = Urgent
Block = SwapPhase II
Text = support external calls via xremote mechanism, to allow external programs to drive zmap. \
Review xremote code \
 \
More stuff... \
 \
> We would like to be able to at least support all of the current xremote                  \
> commands, which from my calculations are:                                                \
>  * gif                                                                                   \
>  * seqrecalc                                                                             \
>  * seqget _SeqName_                                                                      \
>  * seqdisplay                                                                            \
>  * seqdisplay -visible_coords _Start_ _End_                                              \
>  * seqactions -rev_comp                                                                  \
>  * parse _FileName_                                                                      \
>  * writeaccess -gain                                                                     \
>  * save                                                                                  \
> If you know of any more please let me know.  We would rather change the                  \
> names for these commands, which will probably help with debugging in a                   \
> test system if we find old commands coming from otterlace for example.                   \
 \
 \
Looks like a complete list of our commands. I intend to replace all the                    \
editing that the annotators currently do in tree view with Perl/Tk                         \
interfaces, so you don't need to support that.                                             \
                                                                                           \
Feel free to change the names and structures of commands.                                  \
                                                                                           \
My only concern with xremote is whether we get useful feedback from                        \
zMap. We get an exit status from xremote, but we don't get any                             \
messages. Can we get feedback actually from the zMap, or is all that                       \
xremote can say is that it sent the message to a valid window? It would                    \
be nice, for instance, to be able to ask zMap what region it is                            \
currently displaying.                                                                      \
                                                                                           \
I assume we will be launching the zMap process from our perl code.                         \
Could it just print its X window ID on STDERR, and fork a child that                       \
does the actual work (ie: daemon)? This would avoid us messing with the                    \
filing system.                                                                            




[zmap remote sematics]
Across = Important
Down = Urgent
Block = SwapPhase II
Text = what do we need to support. 

[das 1 xml support]
Across = Important
Down = Not_Urgent
Block = ReplacePhase
Text = Otter wants to get features from ensembl databases.  There are das servers to serve this. \
we should use this to replace the need to download to ace.

[otter xml support]
Across = Important
Down = Not_Urgent
Block = ReplacePhase
Text = when das 1 works it should be easier to get zmap to understand otter xml

[read features from pipeline database]
Across = Important
Down = Not_Urgent
Block = ReplacePhase
Text = More replacement of acedb .ace files


[otter lace stuff]
Across = Important
Down = Urgent
Block = ReplacePhase
Text = 1) Lace - > sgifaceserver, Roy needs to check code works or if it needs                    \
tweaking.  Add -readonly and have zmap and xace launch together.                           \
                                                                                           \
2) Otterlace -> zmap, protocol + support code ready, but actual operations                 \
not finished.  Roy needs to look @ it.                                                    



[local blast execution]
Across = Important
Down = Not_Urgent
Block = ReplacePhase
Text = Otter does some local blast searches against a user's database and creates ace files for \
otter/Fmap.  What can we do with regards this?

[editing]
Across = Important
Down = Not_Urgent
Block = editing
Text = decide on editing mechanism. \
Do our own interface... <br/>\
xremote -> DAS2 translation... <br/> \
xremote -> Otter translation.. 

[buttons and control level]
Across = Important
Down = Not_Urgent
Text = Sensitivity of buttons is all out of whack.  This needs a state reading/setting routine \
to modify their sensitivity in a similar way to zoom buttons.  Menu items of main menu should \
also be included in this design. (comment unused ones ATM [Urgent]).  The display layout is also \
currently not optimal.

