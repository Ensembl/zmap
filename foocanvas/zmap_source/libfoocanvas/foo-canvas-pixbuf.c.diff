--- ./tmp_merged_foocanvas/libfoocanvas/foo-canvas-pixbuf.c	2010-12-17 17:07:36.731546000 +0000
+++ ./tmp_zmap_foocanvas/libfoocanvas/foo-canvas-pixbuf.c	2010-12-17 17:12:10.099977000 +0000
@@ -1,3 +1,4 @@
+/*  Last edited: Dec 16 11:21 2010 (edgrif) */
 /* GNOME libraries - GdkPixbuf item for the GNOME canvas
  *
  * Copyright (C) 1999 The Free Software Foundation
@@ -22,8 +23,8 @@
 
 #include <config.h>
 #include <math.h>
-#include <libfoocanvas/foo-canvas.h>
-#include <libfoocanvas/foo-canvas-util.h>
+#include <libzmapfoocanvas/foo-canvas.h>
+#include <libzmapfoocanvas/foo-canvas-util.h>
 #include <gdk-pixbuf/gdk-pixbuf.h>
 #include "foo-canvas-pixbuf.h"
 
@@ -530,13 +531,13 @@
 	}
 
 	if (priv->x_in_pixels) {
-		x = i2w_dx + priv->x / item->canvas->pixels_per_unit;
+		x = i2w_dx + priv->x / item->canvas->pixels_per_unit_x;
 	} else {
 		x = i2w_dx + priv->x;
 	}
 
 	if (priv->y_in_pixels) {
-		y = i2w_dy + priv->y / item->canvas->pixels_per_unit;
+		y = i2w_dy + priv->y / item->canvas->pixels_per_unit_y;
 	} else {
 		y = i2w_dy + priv->y;
 	}
@@ -548,7 +549,7 @@
 	}
 
 	if (priv->width_in_pixels)
-		width /= item->canvas->pixels_per_unit;
+		width /= item->canvas->pixels_per_unit_x;
 
 	if (priv->height_set) {
 		height = priv->height;
@@ -557,7 +558,7 @@
 	}
 
 	if (priv->height_in_pixels)
-		height /= item->canvas->pixels_per_unit;
+		height /= item->canvas->pixels_per_unit_y;
 
 
 	switch (priv->anchor) {
@@ -747,8 +748,8 @@
 	pixbuf = priv->pixbuf;
 
 	*actual_item = item;
-
-	no_hit = item->canvas->pixels_per_unit * 2 + 10;
+	/* guessing that the x factor is OK here. RNGC */
+	no_hit = item->canvas->pixels_per_unit_x * 2 + 10;
 
 	if (!priv->pixbuf)
 		return no_hit;
@@ -789,13 +790,13 @@
 	priv = gcp->priv;
 
 	if (priv->x_in_pixels) {
-		priv->x += dx * item->canvas->pixels_per_unit;
+		priv->x += dx * item->canvas->pixels_per_unit_x;
 	} else {
 		priv->x += dx;
 	}
 
 	if (priv->y_in_pixels) {
-		priv->y += dy * item->canvas->pixels_per_unit;
+		priv->y += dy * item->canvas->pixels_per_unit_y;
 	} else {
 		priv->y += dy;
 	}
