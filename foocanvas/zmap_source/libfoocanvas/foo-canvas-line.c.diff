--- ./merged_foocanvas/libfoocanvas/foo-canvas-line.c	2010-03-09 10:49:06.570000000 +0000
+++ ./zmap_foocanvas/libfoocanvas/foo-canvas-line.c	2010-03-04 15:11:52.000000000 +0000
@@ -1,3 +1,4 @@
+/*  Last edited: Mar  4 15:11 2010 (edgrif) */
 /*
  * Copyright (C) 1997, 1998, 1999, 2000 Free Software Foundation
  * All rights reserved.
@@ -315,7 +316,7 @@
 	/* Add possible over-estimate for wide lines */
 
 	if (line->width_pixels)
-		width = line->width / line->item.canvas->pixels_per_unit;
+		width = line->width / line->item.canvas->pixels_per_unit_x;
 	else
 		width = line->width;
 
@@ -443,7 +444,7 @@
 		return;
 
 	if (line->width_pixels)
-		width = line->width / line->item.canvas->pixels_per_unit;
+		width = line->width / line->item.canvas->pixels_per_unit_x;
 	else
 		width = line->width;
 
@@ -454,9 +455,9 @@
 	shape_c = line->shape_c + width / 2.0;
 
 	if (line->width_pixels) {
-		shape_a /= line->item.canvas->pixels_per_unit;
-		shape_b /= line->item.canvas->pixels_per_unit;
-		shape_c /= line->item.canvas->pixels_per_unit;
+		shape_a /= line->item.canvas->pixels_per_unit_x;
+		shape_b /= line->item.canvas->pixels_per_unit_x;
+		shape_c /= line->item.canvas->pixels_per_unit_x;
 	}
 
 	shape_a += 0.001;
@@ -577,7 +578,7 @@
 	if (line->width_pixels)
 		width = (int) line->width;
 	else
-		width = (int) (line->width * line->item.canvas->pixels_per_unit + 0.5);
+		width = (int) (line->width * line->item.canvas->pixels_per_unit_x + 0.5);
 
 	gdk_gc_set_line_attributes (line->gc,
 				    width,
@@ -1103,12 +1104,12 @@
 	 */
 
 	if (line->width_pixels)
-		width = line->width / item->canvas->pixels_per_unit;
+		width = line->width / item->canvas->pixels_per_unit_x;
 	else
 		width = line->width;
 
-	if (width < (1.0 / item->canvas->pixels_per_unit))
-		width = 1.0 / item->canvas->pixels_per_unit;
+	if (width < (1.0 / item->canvas->pixels_per_unit_x))
+		width = 1.0 / item->canvas->pixels_per_unit_x;
 
 	changed_miter_to_bevel = 0;
 
