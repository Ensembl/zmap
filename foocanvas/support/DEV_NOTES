

Keeping up to date 
------------------

Run through the following for developing changes to foocanvas:

check out the current foocanvas.

$ alias gcvs='cvs -z3 -d:pserver:anonymous@anoncvs.gnome.org:2401/cvs/gnome'
$ gcvs co foocanvas
 

modify files in foocanvas/libfoocanvas
 

create the patch which we'll store in cvs

$ cd foocanvas/libfoocanvas
$ gcvs diff -u > ZMap/foocanvas/support/libfoocanvas-VERSION.patch


store in ZMap cvs. Make sure '-ko' is used to STOP keyword substitution ($Id: DEV_NOTES,v 1.4 2006-03-27 11:18:58 rds Exp $).

$ cd ZMap/foocanvas/support/
$ cvs add -ko -m'message' libfoocanvas-VERSION.patch


should test the patch by
$ gcvs export -rHEAD foocanvas
$ cd foocanvas/libfoocanvas
$ patch -p0 < ZMap/foocanvas/support/libfoocanvas-VERSION.patch



Creating the tar.gz
-------------------

$ gcvs export -rHEAD foocanvas
$ mv foocanvas libfoocanvas-VERSION

now make all the autoconf stuff.  I had to do this first.
$ export AUTOMAKE=~/bin/automake

aclocal needs to be told where it's m4 files are.
~zmap/prefix/LINUX/share/aclocal
~zmap/prefix/LINUX/share/aclocal-1.9
are good bets at the moment. glib-gettext.m4 seems to be a dependancy 
which breaks everything silently....

$ export ACLOCAL_FLAGS="-I ~/share/aclocal -I ~/share/aclocal-1.9"
autogen.sh also requires gnome-common 

$ gcvs co gnome-common; ./configure; make; make install

For  the  last  build  (20060326)  I  had  to  modify  autogen.sh  and
configure.in as per  build.patch. Unsure as to why,  possibly a broken
autotools setup. 

$ ./autogen.sh

$ make dist-gzip
  this uses VERSION from configure.in (currently 0.1), I was using YYYYMMDD, who knows what's best.

$ mv libfoocanvas-VERSION.tar.gz ZMap/foocanvas/support/
$ cvs commit -m'message' libfoocanvas-VERSION.tar.gz

Should alter untar_patch.sh to set the version variable to VERSION and
tag the files as libfoocanvas-VERSION.
Test by running ./untar_patch.sh and seeing no errors in patch and a complete build




ALPHA builds
------------

Now auto{conf,make}, m4 and libtool are installed

Use gtar and gpatch as the OSF ones don't do gnu options.

export AUTOMAKE=~acedb/prefix/ALPHA/bin/automake-1.9
make sure /usr/local/gtk2/bin is in $PATH

gnome-common & gtk-doc are now installed so just do the following
./autogen.sh; ./configure; make; make install
